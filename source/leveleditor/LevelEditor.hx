package leveleditor;

import flixel.group.FlxGroup.FlxTypedGroup;
import lime.app.Application;
import lime.utils.Assets;

class LevelEditor extends CoreState {
    public static var instance:LevelEditor;


    var axle:Axle;

    public var layers:FlxTypedGroup<LayerVisualizer>;

    override function create() {
        super.create();

        instance = this;

        //map-icon
        Application.current.window.setIcon(Assets.getImage("embed/defaults/leveleditor/icon512.png"));

        Application.current.window.title = "PAE2.0 - Level editor - Unnamed map.";

        //------------------------------------

        axle = new Axle();
        axle.visible = true;
        axle.state = ROTATE;

        axle.onMove = move;
        axle.onScale = scale;
        axle.onChangeAngle = rotate;

        //------------------------------------

        layers = new FlxTypedGroup();
    }

    @:access(Main)
    override function destroy() {

        //reset to default
        instance = null;

        axle.destroy();

        Application.current.window.setIcon(Main._getWindowIcon(Main.SetupConfig.getConfig("WindowIcon", "string", "embed/defaults/icon32.png")));
		Application.current.window.title = Main.SetupConfig.getConfig("WindowName", "string", "PAE 2.0");

        super.destroy();
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    //AXLE HANDLES

    function move() {
        
    }

    function scale(axis:Int) {
        
    }

    function rotate() {
        
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    override function update(elapsed:Float) {
        super.update(elapsed);

        axle.update(elapsed);
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    override function draw() {
        super.draw();

        axle.draw();
    }
}