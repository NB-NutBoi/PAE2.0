package leveleditor.componentvisualizers;

import flixel.util.FlxColor;
import utility.Utils;
import flixel.math.FlxPoint;
import flixel.util.FlxDestroyUtil;
import oop.Component;
import flixel.FlxSprite;

class AudioListenerVisualizer extends ComponentVisualizer {
    
    //literally just a visualizer to locate this shit visually

    public var icon:FlxSprite;

    override public function new(type:ComponentClass, parent:ObjectVisualizer) {
        super(type,parent);

        icon = new FlxSprite(
            parent.transform.internalX,
            parent.transform.internalY
            ,"embed/components/AudioListener.png");

        icon.x -= (icon.width * 0.5);
        icon.y -= (icon.height * 0.5);
    }

    override function destroy() {
        icon = FlxDestroyUtil.destroy(icon);
        super.destroy();
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    override function onActiveLayerChange(to:Bool) {
        icon.color = to ? FlxColor.WHITE : FlxColor.GRAY;
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    override function checkCollides(mousePos:FlxPoint):Bool {
        return Utils.overlapsSprite(icon, mousePos, false);
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    override function update(elapsed:Float) {
        super.update(elapsed);

        icon.setPosition(
            owner.transform.internalX,
            owner.transform.internalY);

        icon.x -= (icon.width * 0.5);
        icon.y -= (icon.height * 0.5);
    }

    override function draw() {
        icon.draw();
    }

}